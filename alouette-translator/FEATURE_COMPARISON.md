# Alouette 功能复刻对比文档

## 项目概览

本文档详细说明了从 **alouette-app** (Tauri + Vue 3 + Rust) 到 **alouette-translator** (Flutter + Dart) 的功能复刻情况。

## 核心功能对比

### ✅ 已复刻的功能

#### 1. LLM 连接与配置

| 功能            | Tauri 版本 | Flutter 版本 | 状态     |
| --------------- | ---------- | ------------ | -------- |
| Ollama 连接     | ✅         | ✅           | 完全复刻 |
| LM Studio 连接  | ✅         | ✅           | 完全复刻 |
| 服务器 URL 配置 | ✅         | ✅           | 完全复刻 |
| API 密钥支持    | ✅         | ✅           | 完全复刻 |
| 模型列表获取    | ✅         | ✅           | 完全复刻 |
| 连接状态检测    | ✅         | ✅           | 完全复刻 |

#### 2. 翻译核心功能

| 功能               | Tauri 版本 | Flutter 版本 | 状态     |
| ------------------ | ---------- | ------------ | -------- |
| 多语言翻译         | ✅         | ✅           | 完全复刻 |
| Ollama API 调用    | ✅         | ✅           | 完全复刻 |
| LM Studio API 调用 | ✅         | ✅           | 完全复刻 |
| 批量翻译           | ✅         | ✅           | 完全复刻 |
| 翻译结果清理       | ✅         | ✅           | 完全复刻 |
| 错误处理           | ✅         | ✅           | 完全复刻 |

#### 3. 支持的语言

| 语言               | Tauri 版本 | Flutter 版本 | 状态     |
| ------------------ | ---------- | ------------ | -------- |
| 英语 (English)     | ✅         | ✅           | 完全复刻 |
| 中文 (Chinese)     | ✅         | ✅           | 完全复刻 |
| 日语 (Japanese)    | ✅         | ✅           | 完全复刻 |
| 韩语 (Korean)      | ✅         | ✅           | 完全复刻 |
| 法语 (French)      | ✅         | ✅           | 完全复刻 |
| 德语 (German)      | ✅         | ✅           | 完全复刻 |
| 西班牙语 (Spanish) | ✅         | ✅           | 完全复刻 |
| 意大利语 (Italian) | ✅         | ✅           | 完全复刻 |
| 俄语 (Russian)     | ✅         | ✅           | 完全复刻 |
| 阿拉伯语 (Arabic)  | ✅         | ✅           | 完全复刻 |
| 印地语 (Hindi)     | ✅         | ✅           | 完全复刻 |
| 希腊语 (Greek)     | ✅         | ✅           | 完全复刻 |

#### 4. 用户界面功能

| 功能         | Tauri 版本 | Flutter 版本 | 状态     |
| ------------ | ---------- | ------------ | -------- |
| 文本输入区域 | ✅         | ✅           | 改进实现 |
| 语言选择器   | ✅         | ✅           | 改进实现 |
| 翻译按钮     | ✅         | ✅           | 改进实现 |
| 结果显示     | ✅         | ✅           | 改进实现 |
| 设置对话框   | ✅         | ✅           | 改进实现 |
| 状态指示器   | ✅         | ✅           | 改进实现 |

### 🆕 Flutter 版本的改进功能

#### 1. 用户界面改进

- **Material 3 设计**: 使用最新的 Material Design 3 规范
- **响应式布局**: 更好的多屏幕适配
- **直观的语言选择**: 使用 FilterChip 组件，显示原生语言名称
- **实时状态反馈**: 更清晰的连接状态和翻译进度显示
- **复制功能**: 支持单个翻译和全部翻译的复制操作

#### 2. 错误处理改进

- **详细错误信息**: 提供更具体的错误描述和解决建议
- **网络超时处理**: 更好的网络连接超时管理
- **用户友好提示**: 使用 SnackBar 提供即时反馈

#### 3. 代码架构改进

- **服务分离**: 清晰的服务层架构 (LLMConfigService, TranslationService)
- **模型定义**: 强类型的数据模型定义
- **组件化设计**: 可重用的 Widget 组件
- **状态管理**: 更好的状态管理和数据流

## 技术实现对比

### API 调用实现

#### Tauri 版本 (Rust)

```rust
// Ollama API 调用
let response = client
    .post(&api_url)
    .json(&request_body)
    .send()
    .await;
```

#### Flutter 版本 (Dart)

```dart
// Ollama API 调用
final response = await http
    .post(
      Uri.parse(apiUrl),
      headers: {'Content-Type': 'application/json'},
      body: json.encode(requestBody),
    )
    .timeout(const Duration(seconds: 60));
```

### 系统提示模板

两个版本都使用相同的系统提示逻辑：

- 明确的语言规范避免混淆 (如区分日语和韩语)
- 温度设置为 0.1 确保翻译一致性
- 限制输出长度和停止词设置

### 翻译结果清理

Flutter 版本复刻了 Rust 版本的翻译结果清理逻辑：

- 移除常见前缀 ("Translation:", "Here is the translation:" 等)
- 移除多余的引号和空白
- 保持原始意图和格式

## 平台支持对比

| 平台    | Tauri 版本 | Flutter 版本 | 备注             |
| ------- | ---------- | ------------ | ---------------- |
| Windows | ✅         | ✅           | Flutter 原生支持 |
| macOS   | ✅         | ✅           | Flutter 原生支持 |
| Linux   | ✅         | ✅           | Flutter 原生支持 |
| Android | ✅         | ✅           | Flutter 主要优势 |
| iOS     | ❌         | ✅           | Flutter 独有优势 |
| Web     | ✅         | ✅           | 两者都支持       |

## 配置兼容性

Flutter 版本保持与 Tauri 版本相同的配置结构：

- 相同的默认端口 (Ollama: 11434, LM Studio: 1234)
- 相同的 API 端点路径
- 相同的请求/响应格式
- 相同的模型参数设置

## 依赖对比

### Tauri 版本主要依赖

- **前端**: Vue 3, Vite, JavaScript
- **后端**: Rust, Tauri, reqwest, serde
- **平台**: 需要 Rust 工具链

### Flutter 版本主要依赖

- **框架**: Flutter SDK, Dart
- **HTTP 客户端**: http package
- **TTS**: flutter_tts (继承原有功能)
- **平台**: 只需 Flutter SDK

## 使用体验对比

### Tauri 版本

- 接近原生应用性能
- 需要安装 Rust 工具链进行开发
- 桌面平台优化良好

### Flutter 版本

- 统一的跨平台体验
- 更快的开发迭代
- 移动平台原生体验
- 更容易部署和分发

## 总结

Flutter 版本成功复刻了 Tauri 版本的所有核心翻译功能，并在以下方面有所改进：

1. **更好的移动端支持**: iOS 原生支持
2. **改进的用户界面**: Material 3 设计和响应式布局
3. **简化的部署**: 无需复杂的工具链设置
4. **统一的代码库**: 一套代码支持所有平台
5. **更好的错误处理**: 用户友好的错误信息和恢复机制

这个复刻项目证明了 Flutter 在跨平台应用开发中的强大能力，特别是在需要统一用户体验和快速开发迭代的场景中。
